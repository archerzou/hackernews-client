(window["webpackJsonphackernews-client"]=window["webpackJsonphackernews-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n(50)},28:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(19),o=n.n(s),c=(n(28),n(22)),i=n(4),l=n(5),u=n(9),h=n(6),m=n(2),S=n(8),p=n(7),b=n(11),v=n(20),f=n.n(v),y=n(3),d=n(21),O=n.n(d);n(49);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g,T="redux",w="https://hn.algolia.com/api/v1",k={width:"40%"},K={width:"30%"},N={width:"10%"},C={NONE:function(e){return e},TITLE:function(e){return Object(y.sortBy)(e,"title")},AUTHOR:function(e){return Object(y.sortBy)(e,"author")},COMMENTS:function(e){return Object(y.sortBy)(e,"num_comments").reverse()},POINTS:function(e){return Object(y.sortBy)(e,"points").reverse()}},D=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={results:null,searchKey:"",searchTerm:T,error:null,isLoading:!1},n.needsToSearchTopStories=n.needsToSearchTopStories.bind(Object(m.a)(n)),n.setSearchTopStories=n.setSearchTopStories.bind(Object(m.a)(n)),n.fetchSearchTopStories=n.fetchSearchTopStories.bind(Object(m.a)(n)),n.onSearchChange=n.onSearchChange.bind(Object(m.a)(n)),n.onSearchSubmit=n.onSearchSubmit.bind(Object(m.a)(n)),n.onDismiss=n.onDismiss.bind(Object(m.a)(n)),n}return Object(S.a)(t,e),Object(l.a)(t,[{key:"needsToSearchTopStories",value:function(e){return!this.state.results[e]}},{key:"setSearchTopStories",value:function(e){var t=e.hits,n=e.page;this.setState(function(e,t){return function(n){var r=n.searchKey,a=n.results,s=a&&a[r]?a[r].hits:[],o=[].concat(Object(b.a)(s),Object(b.a)(e));return{results:j({},a,Object(p.a)({},r,{hits:o,page:t})),isLoading:!1}}}(t,n))}},{key:"fetchSearchTopStories",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState({isLoading:!0}),f()("".concat(w).concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(n,"&").concat("hitsPerPage=").concat("20")).then(function(e){return t.setSearchTopStories(e.data)}).catch(function(e){return t.setState({error:e})})}},{key:"componentDidMount",value:function(){var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchSearchTopStories(e)}},{key:"onSearchChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"onSearchSubmit",value:function(e){var t=this.state.searchTerm;this.setState({searchKey:t}),this.needsToSearchTopStories(t)&&this.fetchSearchTopStories(t),e.preventDefault()}},{key:"onDismiss",value:function(e){var t=this.state,n=t.searchKey,r=t.results,a=r[n],s=a.hits,o=a.page,c=s.filter(function(t){return t.objectID!==e});this.setState({results:j({},r,Object(p.a)({},n,{hits:c,page:o}))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchTerm,r=t.results,s=t.searchKey,o=t.error,c=t.isLoading,i=r&&r[s]&&r[s].page||0,l=r&&r[s]&&r[s].hits||[];return a.a.createElement("div",{className:"page"},a.a.createElement("div",{className:"interactions"},a.a.createElement(P,{value:n,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit},"Search")),o?a.a.createElement("div",{className:"interactions"},a.a.createElement("p",null,"Something went wrong.")):a.a.createElement(L,{list:l,onDismiss:this.onDismiss}),a.a.createElement("div",{className:"interactions"},a.a.createElement(M,{isLoading:c,onClick:function(){return e.fetchSearchTopStories(s,i+1)}},"More")))}}]),t}(r.Component),P=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,s=t.onSubmit;return a.a.createElement("form",{onSubmit:s},a.a.createElement("div",{class:"wrap"},a.a.createElement("div",{class:"search"},a.a.createElement("input",{type:"text",class:"searchTerm",value:n,onChange:r,ref:function(t){return e.input=t}}),a.a.createElement("button",{type:"submit",class:"searchButton"},a.a.createElement("i",{class:"fa fa-search"})))))}}]),t}(r.Component),L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={sortKey:"NONE",isSortReverse:!1},n.onSort=n.onSort.bind(Object(m.a)(n)),n}return Object(S.a)(t,e),Object(l.a)(t,[{key:"onSort",value:function(e){var t=this.state.sortKey===e&&!this.state.isSortReverse;this.setState({sortKey:e,isSortReverse:t})}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.onDismiss,r=this.state,s=r.sortKey,o=r.isSortReverse,c=C[s](t),i=o?c.reverse():c;return a.a.createElement("div",{className:"table"},a.a.createElement("div",{className:"table-header"},a.a.createElement("span",{style:{width:"40%"}},a.a.createElement(R,{sortKey:"TITLE",onSort:this.onSort,activeSortKey:s},"Title")),a.a.createElement("span",{style:{width:"30%"}},a.a.createElement(R,{sortKey:"AUTHOR",onSort:this.onSort,activeSortKey:s},"Author")),a.a.createElement("span",{style:{width:"10%"}},a.a.createElement(R,{sortKey:"COMMENTS",onSort:this.onSort,activeSortKey:s},"Comments")),a.a.createElement("span",{style:{width:"10%"}},a.a.createElement(R,{sortKey:"POINTS",onSort:this.onSort,activeSortKey:s},"Points")),a.a.createElement("span",{style:{width:"10%"}},"Archive")),i.map(function(e){return a.a.createElement("div",{key:e.objectID,className:"table-row"},a.a.createElement("span",{style:k},a.a.createElement("a",{href:e.url},e.title)),a.a.createElement("span",{style:K},e.author),a.a.createElement("span",{style:N},e.num_comments),a.a.createElement("span",{style:N},e.points),a.a.createElement("span",{style:N},a.a.createElement(I,{onClick:function(){return n(e.objectID)},className:"button-inline"},"Dismiss")))}))}}]),t}(r.Component),I=function(e){var t=e.onClick,n=e.className,r=void 0===n?"":n,s=e.children;return a.a.createElement("button",{onClick:t,className:r,type:"button"},s)},B=function(){return a.a.createElement("div",null,"Loading...")},M=(g=I,function(e){var t=e.isLoading,n=Object(c.a)(e,["isLoading"]);return t?a.a.createElement(B,null):a.a.createElement(g,n)}),R=function(e){var t=e.sortKey,n=e.activeSortKey,r=e.onSort,s=e.children,o=O()("button-inline",{"button-active":t===n});return a.a.createElement(I,{onClick:function(){return r(t)},className:o},s)},A=D;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.7af79403.chunk.js.map